<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>View Employee</title>
    <link rel="stylesheet" th:href="@{/css/style.css}" />
</head>
<body>
<!-- Barre de navigation -->
<div th:replace="fragments/navbar :: navbar"></div>

<section class="hero-body">
    <div class="card">
        <h2>Informations Personnelles</h2>
        <ul>
            <li><strong>Nom :</strong> <span th:text="${employee.lastName}"></span></li>
            <li><strong>Prénom :</strong> <span th:text="${employee.firstName}"></span></li>
            <li><strong>Grade :</strong>
                <span th:text="${employee.grade != null ? employee.grade.label : 'Non défini'}"></span>
            </li>
            <li><strong>Poste :</strong> <span th:text="${employee.post}"></span></li>
            <li><strong>Salaire :</strong> <span th:text="${employee.salary}"></span>€</li>
            <li><strong>Nom d'utilisateur :</strong> <span th:text="${employee.username}"></span></li>
        </ul>

        <h3>Département :</h3>
        <p th:text="${employee.department != null ? employee.department.departmentName : 'Non assigné'}"></p>

        <h3>Rôle(s)</h3>
        <ul th:if="${employee.roles != null and !#lists.isEmpty(employee.roles)}">
            <li th:each="er : ${employee.roles}">
                <span th:text="${er.role != null ? er.role.roleName : 'N/A'}"></span>
            </li>
        </ul>
        <p th:if="${employee.roles == null or #lists.isEmpty(employee.roles)}">Aucun rôle assigné</p>

        <h3>Projets</h3>
        <ul id="projects-list" th:if="${employee.projects != null and !#lists.isEmpty(employee.projects)}">
            <li th:each="ep : ${employee.projects}">
                <span th:text="${ep.project != null ? ep.project.nameProject : 'N/A'}"></span>
                <small th:if="${ep.project != null and ep.project.status != null}"
                       th:text="'(' + ${ep.project.status.label} + ')'"></small>
            </li>
        </ul>
        <p th:if="${employee.projects == null or #lists.isEmpty(employee.projects)}">Aucun projet assigné</p>

        <div class="form-action" style="display:flex;gap:10px;margin-top:12px;">
            <a class="button" th:href="@{/employee(action='edit', id=${employee.id})}">Modifier</a>
            <a class="button" th:href="@{/employee}">Retour</a>
            <a class="button" th:href="@{/pay(employeeId=${employee.id})}">Fiche de paie</a>
        </div>
    </div>
</section>

</body>
</html>
